{"config": {"view": {"continuousWidth": 300, "continuousHeight": 300}}, "layer": [{"mark": {"type": "bar"}, "encoding": {"color": {"field": "Position", "legend": {"orient": "top", "title": "Position"}, "scale": {"domain": ["Claims", "Liabilities", "Net"], "range": ["#2A9D8F", "#B91C1C", "#282D28"]}, "type": "nominal"}, "opacity": {"condition": {"param": "param_1", "value": 1.0, "empty": false}, "value": 0.6}, "size": {"condition": {"param": "param_1", "value": 10, "empty": false}, "value": 8}, "tooltip": [{"field": "date", "format": "%Y-%m", "title": "Date", "type": "temporal"}, {"field": "Position", "title": "Position", "type": "nominal"}, {"field": "Value", "format": ",.2f", "title": "Amount (USD tn)", "type": "quantitative"}], "x": {"axis": {"format": "%Y"}, "field": "date", "timeUnit": "yearmonth", "title": "", "type": "temporal"}, "y": {"field": "Value", "title": "Trillion USD", "type": "quantitative"}}, "name": "view_1", "transform": [{"lookup": "L_REP_CTY", "from": {"data": {"url": "data/chart1_metadata.json", "format": {"type": "json"}}, "key": "L_REP_CTY", "fields": ["country_name_rep", "region_rep"]}}, {"filter": "entity == 'world' || datum.country_name_rep == entity || datum.region_rep == entity"}, {"aggregate": [{"op": "sum", "field": "OBS_VALUE", "as": "total_obs"}], "groupby": ["date", "L_POSITION"]}, {"pivot": "L_POSITION", "value": "total_obs", "groupby": ["date"]}, {"calculate": "datum.C / 1e6", "as": "Claims"}, {"calculate": "-datum.L / 1e6", "as": "Liabilities"}, {"calculate": "(datum.C - datum.L) / 1e6", "as": "Net"}, {"fold": ["Claims", "Liabilities", "Net"], "as": ["Position", "Value"]}, {"filter": "datum.Position != 'Net'"}]}, {"mark": {"type": "line", "strokeWidth": 3}, "encoding": {"color": {"field": "Position", "legend": {"orient": "top", "title": "Position"}, "scale": {"domain": ["Claims", "Liabilities", "Net"], "range": ["#2A9D8F", "#B91C1C", "#282D28"]}, "type": "nominal"}, "tooltip": [{"field": "date", "format": "%Y-%m", "title": "Date", "type": "temporal"}, {"field": "Position", "title": "Position", "type": "nominal"}, {"field": "Value", "format": ",.2f", "title": "Amount (USD tn)", "type": "quantitative"}], "x": {"axis": {"format": "%Y"}, "field": "date", "timeUnit": "yearmonth", "title": "", "type": "temporal"}, "y": {"field": "Value", "title": "Trillion USD", "type": "quantitative"}}, "transform": [{"lookup": "L_REP_CTY", "from": {"data": {"url": "data/chart1_metadata.json", "format": {"type": "json"}}, "key": "L_REP_CTY", "fields": ["country_name_rep", "region_rep"]}}, {"filter": "entity == 'world' || datum.country_name_rep == entity || datum.region_rep == entity"}, {"aggregate": [{"op": "sum", "field": "OBS_VALUE", "as": "total_obs"}], "groupby": ["date", "L_POSITION"]}, {"pivot": "L_POSITION", "value": "total_obs", "groupby": ["date"]}, {"calculate": "datum.C / 1e6", "as": "Claims"}, {"calculate": "-datum.L / 1e6", "as": "Liabilities"}, {"calculate": "(datum.C - datum.L) / 1e6", "as": "Net"}, {"fold": ["Claims", "Liabilities", "Net"], "as": ["Position", "Value"]}, {"filter": "datum.Position == 'Net'"}]}, {"mark": {"type": "circle", "size": 70}, "encoding": {"color": {"field": "Position", "legend": {"orient": "top", "title": "Position"}, "scale": {"domain": ["Claims", "Liabilities", "Net"], "range": ["#2A9D8F", "#B91C1C", "#282D28"]}, "type": "nominal"}, "opacity": {"condition": {"param": "param_1", "value": 1, "empty": false}, "value": 0}, "tooltip": [{"field": "date", "format": "%Y-%m", "title": "Date", "type": "temporal"}, {"field": "Position", "title": "Position", "type": "nominal"}, {"field": "Value", "format": ",.2f", "title": "Amount (USD tn)", "type": "quantitative"}], "x": {"axis": {"format": "%Y"}, "field": "date", "timeUnit": "yearmonth", "title": "", "type": "temporal"}, "y": {"field": "Value", "title": "Trillion USD", "type": "quantitative"}}, "transform": [{"lookup": "L_REP_CTY", "from": {"data": {"url": "data/chart1_metadata.json", "format": {"type": "json"}}, "key": "L_REP_CTY", "fields": ["country_name_rep", "region_rep"]}}, {"filter": "entity == 'world' || datum.country_name_rep == entity || datum.region_rep == entity"}, {"aggregate": [{"op": "sum", "field": "OBS_VALUE", "as": "total_obs"}], "groupby": ["date", "L_POSITION"]}, {"pivot": "L_POSITION", "value": "total_obs", "groupby": ["date"]}, {"calculate": "datum.C / 1e6", "as": "Claims"}, {"calculate": "-datum.L / 1e6", "as": "Liabilities"}, {"calculate": "(datum.C - datum.L) / 1e6", "as": "Net"}, {"fold": ["Claims", "Liabilities", "Net"], "as": ["Position", "Value"]}, {"filter": "datum.Position == 'Net'"}]}], "data": {"url": "data/chart1_exposures.json", "format": {"type": "json"}}, "height": 400, "params": [{"name": "entity", "value": "world"}, {"name": "param_1", "select": {"type": "point", "fields": ["date", "Position"], "nearest": true, "on": "mouseover"}, "views": ["view_1"]}, {"name": "param_2", "select": {"type": "interval", "encodings": ["x", "y"]}, "bind": "scales", "views": ["view_1"]}], "title": "", "width": 800, "$schema": "https://vega.github.io/schema/vega-lite/v5.8.0.json"}